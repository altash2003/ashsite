<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SNT Profile</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Sora:wght@600;700;800&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --bg-dark: #110022;
            --card-purple: #2e1065;
            --accent-yellow: #fbbf24;
            --text-white: #ffffff;
            --sidebar-width: 80px;
            --sidebar-expanded: 260px;
        }
        /* Apply INTER to everything by default */
        * { margin:0; padding:0; box-sizing:border-box; font-family: 'Inter', sans-serif; }
        
        body { background-color: var(--bg-dark); color: white; display:flex; height:100vh; overflow:hidden; }

        /* --- SIDEBAR --- */
        .sidebar { 
            width: var(--sidebar-width); 
            background: rgba(0,0,0,0.4); 
            border-right: 1px solid rgba(255,255,255,0.1); 
            display: flex; flex-direction: column; 
            padding-top: 20px; 
            transition: width 0.3s cubic-bezier(0.4, 0, 0.2, 1);
            overflow: hidden;
            flex-shrink: 0;
            z-index: 50;
        }
        .sidebar:hover { width: var(--sidebar-expanded); background: rgba(0,0,0,0.8); }

        .nav-item { 
            width: 100%; height: 60px; 
            display: flex; align-items: center; 
            padding-left: 20px; 
            cursor: pointer; 
            color: #a78bfa; 
            transition: 0.2s;
            white-space: nowrap;
            border-left: 4px solid transparent;
        }
        .nav-item:hover, .nav-item.active { 
            background: rgba(91, 33, 182, 0.4); 
            color: white; 
        }
        .nav-item.active { border-left-color: #fbbf24; background: linear-gradient(90deg, rgba(251, 191, 36, 0.1), transparent); }
        
        .nav-icon { font-size: 1.4rem; width: 40px; text-align: center; display: grid; place-items: center; }
        .nav-text { 
            margin-left: 15px; 
            font-weight: 600; 
            font-size: 1rem; 
            opacity: 0; 
            transform: translateX(-10px);
            transition: all 0.3s ease;
        }
        .sidebar:hover .nav-text { opacity: 1; transform: translateX(0); }

        /* MAIN CONTENT */
        .main { flex:1; padding:40px; overflow-y:auto; background: radial-gradient(circle at top right, #4c1d95 0%, #110022 60%); }
        .hidden { display:none !important; }

        /* HEADERS & FONTS */
        /* Apply SORA to headings */
        .header-title { font-family: 'Sora', sans-serif; font-weight: 800; font-size: 2.5rem; margin-bottom: 20px; letter-spacing: -1px; }
        .section-subtitle { color: #d8b4fe; margin-bottom: 1.5rem; font-size: 1.1rem; }

        /* DASHBOARD GRID */
        .dashboard-grid { display: grid; grid-template-columns: 2fr 1fr; gap: 20px; }
        .profile-card { background: #2e1065; border-radius: 20px; padding: 30px; border: 1px solid rgba(255,255,255,0.05); position: relative; overflow: hidden; }
        
        .quick-actions { display: grid; grid-template-columns: 1fr; gap: 15px; }
        .action-card { 
            background: rgba(255,255,255,0.05); border-radius: 15px; padding: 20px; 
            display: flex; align-items: center; gap: 15px; cursor: pointer; border: 1px solid rgba(255,255,255,0.05); transition: 0.2s;
        }
        .action-card:hover { background: rgba(255,255,255,0.1); transform: translateY(-3px); border-color: #fbbf24; }

        /* PROFILE ELEMENTS */
        .badges { display:flex; gap:10px; margin-bottom:30px; }
        .badge { font-family: 'Sora', sans-serif; padding: 5px 15px; border-radius:8px; font-weight:700; font-size:0.75rem; text-transform:uppercase; display:flex; align-items:center; gap:5px; letter-spacing:0.5px; }
        .badge-staff { background: #6366f1; } .badge-million { background: #fbbf24; color:black; } .badge-radiant { background: linear-gradient(90deg, #06b6d4, #d946ef); }
        
        .currency-row { display:flex; align-items:center; gap:15px; margin-bottom:10px; font-family:'Sora', sans-serif; font-weight: 700; font-size:1.5rem; letter-spacing: -0.5px; }

        /* GENERIC GRID */
        .grid-cards { display:grid; grid-template-columns: repeat(auto-fill, minmax(220px, 1fr)); gap:20px; margin-top:20px; }
        .g-card { background: #1e1b4b; padding:15px; border-radius:12px; border:1px solid rgba(255,255,255,0.1); position: relative; overflow: hidden; transition: 0.3s; }
        .g-card:hover { transform: translateY(-5px); box-shadow: 0 10px 20px rgba(0,0,0,0.3); border-color: #a78bfa; }
        .g-card h3 { font-family: 'Sora', sans-serif; font-weight: 700; margin-bottom: 5px; }
        
        .g-btn { width:100%; padding:10px; margin-top:10px; background:#6366f1; border:none; color:white; font-weight:600; border-radius:6px; cursor:pointer; font-family: 'Sora', sans-serif; }
        .g-btn:hover { background: #4f46e5; }

        /* ANNOUNCEMENTS */
        .news-item { background: rgba(0,0,0,0.3); border-left: 4px solid #fbbf24; padding: 20px; margin-bottom: 15px; border-radius: 0 10px 10px 0; }
        .news-date { font-size: 0.8rem; color: #a78bfa; margin-bottom: 5px; font-weight: 500; }
        .news-title { font-family: 'Sora', sans-serif; font-weight: 700; font-size: 1.3rem; color: white; margin-bottom: 10px; }
        .news-body { color: #e2e8f0; font-size: 0.95rem; line-height: 1.6; }

        /* REWARD MODAL */
        .modal-overlay { position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.8); z-index:99; display:flex; justify-content:center; align-items:center; backdrop-filter:blur(5px); display:none; }
        .modal-overlay.open { display:flex; }
        .reward-box { width: 800px; border-radius: 20px; overflow: hidden; border: 4px solid #fbbf24; box-shadow: 0 20px 50px rgba(0,0,0,0.8); }
        .rew-header { background: #fbbf24; padding: 15px; text-align: center; position: relative; }
        .rew-title { font-family: 'Sora', sans-serif; font-weight: 800; font-size: 2rem; color: #1e1b4b; text-transform: uppercase; margin:0; letter-spacing: -1px; }
        .rew-body { background: #a855f7; padding: 30px; display:flex; flex-direction:column; align-items:center; }
        .days-row { display:flex; gap:10px; justify-content:center; align-items:flex-end; width:100%; margin-bottom:30px; }
        
        .day-card { width: 90px; height: 120px; border-radius: 10px; border: 2px solid rgba(255,255,255,0.6); background: repeating-conic-gradient(from 0deg, #7c3aed 0deg 15deg, #6d28d9 15deg 30deg); display: flex; flex-direction:column; align-items:center; justify-content:center; text-align:center; position: relative; }
        .day-card.active { width: 110px; height: 140px; border: 3px solid white; background: repeating-conic-gradient(from 0deg, #fbbf24 0deg 15deg, #d97706 15deg 30deg); color: #451a03; z-index:10; box-shadow: 0 0 30px #fbbf24; }
        .day-card div:first-child { font-family: 'Sora', sans-serif; font-weight: 700; margin-bottom: 5px; }
        
        .claim-btn { background: #fbbf24; border:none; padding: 15px 60px; border-radius:50px; font-family: 'Sora', sans-serif; font-weight: 800; font-size:1.3rem; color: #451a03; cursor:pointer; box-shadow: 0 6px 0 #b45309; letter-spacing: 0.5px; }
        .claim-btn:active { transform:translateY(6px); box-shadow:none; }
    </style>
</head>
<body>

    <div class="sidebar">
        <div class="nav-item active" onclick="switchTab('home', this)">
            <div class="nav-icon"><i class="fas fa-chart-pie"></i></div>
            <div class="nav-text">Dashboard</div>
        </div>
        <div class="nav-item" onclick="switchTab('announcements', this)">
            <div class="nav-icon"><i class="fas fa-bullhorn"></i></div>
            <div class="nav-text">Announcements</div>
        </div>
        <div class="nav-item" onclick="switchTab('store', this)">
            <div class="nav-icon"><i class="fas fa-store"></i></div>
            <div class="nav-text">Item Store</div>
        </div>
        <div class="nav-item" onclick="switchTab('auction', this)">
            <div class="nav-icon"><i class="fas fa-gavel"></i></div>
            <div class="nav-text">Auction House</div>
        </div>
        <div class="nav-item" onclick="switchTab('casino', this)">
            <div class="nav-icon"><i class="fas fa-dice"></i></div>
            <div class="nav-text">Casino Royale</div>
        </div>
        <div class="nav-item" onclick="switchTab('inventory', this)">
            <div class="nav-icon"><i class="fas fa-box"></i></div>
            <div class="nav-text">Inventory</div>
        </div>
    </div>

    <div class="main">
        
        <div id="tab-home">
            <h1 class="header-title">Welcome Back, <span id="u-name">Player</span></h1>
            
            <div class="dashboard-grid">
                <div class="profile-card">
                    <h2 style="font-family:'Sora', sans-serif; font-weight:700; margin-bottom:15px;">Player Profile</h2>
                    <div class="badges" id="u-badges"></div>
                    
                    <div class="currency-row"><i class="fas fa-coins" style="color:#fbbf24"></i> <span id="u-credits">0</span></div>
                    <div class="currency-row"><i class="fas fa-gem" style="color:#d8b4fe"></i> <span id="u-crystals">0</span></div>

                    <div style="margin-top: 30px; background: rgba(0,0,0,0.3); padding: 15px; border-radius: 10px;">
                        <p style="color:#a78bfa; font-size:0.9rem; margin-bottom:10px; font-weight:600;">Giftcode Redemption</p>
                        <div style="display:flex; gap:10px;">
                            <input type="text" id="code-in" placeholder="SNT-XXXX" style="flex:1; padding:10px; border-radius:6px; border:none; background:rgba(255,255,255,0.1); color:white; font-family:'Inter', sans-serif;">
                            <button onclick="redeem()" style="padding:10px 20px; border-radius:6px; border:none; background:#10b981; color:white; font-weight:bold; cursor:pointer; font-family:'Sora', sans-serif;">Claim</button>
                        </div>
                        <p id="redeem-msg" style="margin-top:5px; font-size:0.8rem;"></p>
                    </div>

                    <img src="https://ui-avatars.com/api/?name=ST&background=0D8ABC&color=fff&size=128" style="position:absolute; top:30px; right:30px; width:100px; height:100px; border-radius:50%; border:3px solid white;">
                </div>

                <div class="quick-actions">
                    <div class="action-card" onclick="openRewards()">
                        <i class="fas fa-calendar-check" style="font-size:2rem; color:#fbbf24"></i>
                        <div>
                            <div style="font-family:'Sora', sans-serif; font-weight:700; font-size:1.1rem;">Daily Reward</div>
                            <div style="font-size:0.8rem; color:#a78bfa;">Claim your streak</div>
                        </div>
                    </div>
                    <div class="action-card" style="background: linear-gradient(135deg, rgba(236, 72, 153, 0.2), rgba(236, 72, 153, 0.05)); border-color: #ec4899;" onclick="document.querySelector('.sidebar .nav-item:nth-child(2)').click()">
                        <i class="fas fa-star" style="font-size:2rem; color:#ec4899"></i>
                        <div>
                            <div style="font-family:'Sora', sans-serif; font-weight:700; font-size:1.1rem;">Featured Event</div>
                            <div style="font-size:0.8rem; color:#fbcfe8;">See Announcements</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div id="tab-announcements" class="hidden">
            <h1 class="header-title">Announcements</h1>
            <p class="section-subtitle">Stay updated with the latest news and events.</p>
            <div id="news-container">
                <p style="color:#a78bfa; font-style:italic;">Loading updates...</p>
            </div>
        </div>

        <div id="tab-store" class="hidden">
            <h1 class="header-title">Item Store</h1>
            <div class="grid-cards" id="store-grid"></div>
        </div>

        <div id="tab-auction" class="hidden">
            <h1 class="header-title">Auction House</h1>
            <div class="grid-cards" id="auc-grid"></div>
        </div>

        <div id="tab-casino" class="hidden">
            <h1 class="header-title">Casino Royale</h1>
            <p class="section-subtitle">High stakes, high rewards. Play responsibly.</p>
            <div class="grid-cards">
                <div class="g-card" style="text-align:center; padding:30px;">
                    <i class="fas fa-dice" style="font-size:4rem; color:#fbbf24; margin-bottom:20px;"></i>
                    <h2 style="font-family:'Sora', sans-serif; font-weight:700">Neon Slots</h2>
                    <p style="color:#a78bfa; margin:10px 0 20px;">Spin to win the Jackpot!</p>
                    <button class="g-btn">Play Now</button>
                </div>
                <div class="g-card" style="text-align:center; padding:30px;">
                    <i class="fas fa-chess-board" style="font-size:4rem; color:#ec4899; margin-bottom:20px;"></i>
                    <h2 style="font-family:'Sora', sans-serif; font-weight:700">Roulette</h2>
                    <p style="color:#a78bfa; margin:10px 0 20px;">Red or Black?</p>
                    <button class="g-btn">Play Now</button>
                </div>
            </div>
        </div>

        <div id="tab-inventory" class="hidden">
            <h1 class="header-title">My Inventory</h1>
            <div class="grid-cards" id="inv-grid"></div>
        </div>

    </div>

    <div id="rewards-modal" class="modal-overlay">
        <div class="reward-box">
            <div class="rew-header">
                <div class="rew-title">Daily Reward</div>
                <button onclick="document.getElementById('rewards-modal').classList.remove('open')" style="position:absolute; right:20px; top:20px; background:#ef4444; color:white; border:2px solid white; border-radius:6px; width:30px; cursor:pointer;">X</button>
            </div>
            <div class="rew-body">
                <div class="days-row">
                    <div class="day-card claimed"><div>Day 1</div><div style="font-weight:700">100</div></div>
                    <div class="day-card claimed"><div>Day 2</div><div style="font-weight:700">500</div></div>
                    <div class="day-card claimed"><div>Day 3</div><div style="font-weight:700">1K</div></div>
                    <div class="day-card active"><div>Day 4</div><div style="font-weight:700; font-size:1.2rem;">5K</div></div>
                    <div class="day-card"><div>Day 5</div><div style="font-weight:700">10K</div></div>
                </div>
                <button class="claim-btn" id="btn-claim" onclick="claimDaily()">CLAIM</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        let myUser = null;

        // Auto Login
        socket.emit('player:login', 'tussday');

        socket.on('player:login_success', u => { myUser = u; render(null); });
        socket.on('sync:full_data', db => {
            if(myUser) myUser = db.players.find(p => p.id === myUser.id) || myUser;
            render(db);
        });
        socket.on('redeem_success', msg => { document.getElementById('redeem-msg').innerText = msg; document.getElementById('redeem-msg').style.color = '#4ade80'; });
        socket.on('redeem_fail', msg => { document.getElementById('redeem-msg').innerText = msg; document.getElementById('redeem-msg').style.color = '#f87171'; });

        function render(db) {
            if(!myUser) return;
            
            // PROFILE
            document.getElementById('u-name').innerText = myUser.user;
            document.getElementById('u-credits').innerText = myUser.credits.toLocaleString();
            document.getElementById('u-crystals').innerText = myUser.crystals.toLocaleString();
            
            const badgeCont = document.getElementById('u-badges');
            badgeCont.innerHTML = '';
            if(myUser.badges.includes('STAFF')) badgeCont.innerHTML += `<div class="badge badge-staff"><i class="fas fa-shield-alt"></i> STAFF</div>`;
            if(myUser.badges.includes('MILLIONAIRE')) badgeCont.innerHTML += `<div class="badge badge-million"><i class="fas fa-crown"></i> MILLIONAIRE</div>`;
            if(myUser.badges.includes('RADIANT')) badgeCont.innerHTML += `<div class="badge badge-radiant"><i class="fas fa-gem"></i> RADIANT</div>`;

            // INVENTORY
            const inv = document.getElementById('inv-grid');
            inv.innerHTML = '';
            if(myUser.inventory.length === 0) inv.innerHTML = '<div style="color:#a78bfa; padding:20px;">Your inventory is empty.</div>';
            myUser.inventory.forEach(i => {
                inv.innerHTML += `<div class="g-card" style="text-align:center"><img src="${i.img}" style="width:80px; height:80px; object-fit:cover; margin-bottom:10px;"><div>${i.name}</div></div>`;
            });

            if(db) {
                // ANNOUNCEMENTS
                const newsCont = document.getElementById('news-container');
                newsCont.innerHTML = '';
                if(db.announcements.length === 0) newsCont.innerHTML = '<p style="color:#a78bfa;">No announcements yet.</p>';
                db.announcements.forEach(n => {
                    newsCont.innerHTML += `
                    <div class="news-item">
                        <div class="news-date">${new Date(n.id).toLocaleDateString()}</div>
                        <div class="news-title">${n.title}</div>
                        <div class="news-body">${n.content}</div>
                    </div>`;
                });

                // STORE
                const st = document.getElementById('store-grid'); st.innerHTML = '';
                db.storeItems.forEach(i => {
                    if(i.status === 'Available')
                    st.innerHTML += `<div class="g-card"><img src="${i.img}" style="width:100%; height:140px; object-fit:cover; margin-bottom:10px; border-radius:8px;"><h3>${i.name}</h3><div style="color:#fbbf24">${i.price} Credits</div><button class="g-btn" onclick="socket.emit('player:buy_item', {userId:${myUser.id}, itemId:${i.id}})">Buy</button></div>`;
                });

                // AUCTIONS
                const au = document.getElementById('auc-grid'); au.innerHTML = '';
                db.auctions.forEach(a => {
                    if(a.status === 'Active') {
                        const min = parseInt(a.bid) + 100;
                        au.innerHTML += `<div class="g-card"><img src="${a.img}" style="width:100%; height:140px; object-fit:cover; margin-bottom:10px; border-radius:8px;"><h3>${a.item}</h3><div style="color:#fbbf24">Bid: ${a.bid}</div><div style="font-size:0.8rem">Bidder: ${a.bidder||'None'}</div><button class="g-btn" onclick="socket.emit('player:place_bid', {userId:${myUser.id}, aucId:${a.id}, bid:${min}})">Bid ${min}</button></div>`;
                    }
                });
            }
        }

        function switchTab(t, el) {
            document.querySelectorAll('.main > div').forEach(d => d.classList.add('hidden'));
            document.getElementById('tab-'+t).classList.remove('hidden');
            document.querySelectorAll('.nav-item').forEach(n => n.classList.remove('active'));
            if(el) el.classList.add('active');
        }

        function openRewards() { document.getElementById('rewards-modal').classList.add('open'); }
        function claimDaily() {
            socket.emit('player:claim_daily', { userId: myUser.id, day:4, amount:5000 });
            document.getElementById('btn-claim').innerText = 'CLAIMED!';
            document.getElementById('btn-claim').disabled = true;
            document.getElementById('btn-claim').style.background = 'gray';
            setTimeout(() => document.getElementById('rewards-modal').classList.remove('open'), 1000);
        }
        function redeem() {
            const code = document.getElementById('code-in').value;
            socket.emit('player:redeem_code', { userId: myUser.id, code });
        }
    </script>
</body>
</html>
